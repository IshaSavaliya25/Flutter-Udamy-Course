1. Prerequisites
Before starting, ensure you have:

Flutter SDK installed

Firebase CLI installed

A Google account

Android Studio/VS Code

Git installed

Installing Firebase CLI
# Using npm
npm install -g firebase-tools
# Verify installation
firebase --version
# Login to Firebase
firebase login

2. Firebase Project Setup
2.1 Create Firebase Project
Go to Firebase Console (https://console.firebase.google.com)

Click "Create New Project"

Enter project name

Enable/Disable Google Analytics

Accept terms and create project

2.2 Register Your App
In Firebase Console:

Click "Add App"

Select platform (iOS/Android)

Follow platform-specific steps

3. Flutter Project Configuration
3.1 Install FlutterFire CLI
dart pub global activate flutterfire_cli
3.2 Add Firebase Dependencies
# pubspec.yaml
dependencies:
  firebase_core: ^latest_version
  firebase_auth: ^latest_version  # If using auth
  cloud_firestore: ^latest_version  # If using Firestore
  firebase_storage: ^latest_version  # If using storage
  firebase_messaging: ^latest_version  # If using messaging
3.3 Configure Firebase
# Run in project root
flutterfire configure --project=your-project-id
3.4 Initialize Firebase in Flutter App
// lib/firebase_options.dart will be auto-generated
import 'package:firebase_core/firebase_core.dart';
import 'firebase_options.dart';
 
void main() async {
  WidgetsFlutterBinding.ensureInitialized();
  await Firebase.initializeApp(
    options: DefaultFirebaseOptions.currentPlatform,
  );
  runApp(MyApp());
}
4. Platform-Specific Setup
4.1 Android Setup
Update build.gradle (project level)

// android/build.gradle
buildscript {
    dependencies {
        classpath 'com.google.gms:google-services:4.3.15'
    }
}
Update build.gradle (app level)

// android/app/build.gradle
apply plugin: 'com.google.gms.google-services'
 
android {
    defaultConfig {
        minSdkVersion 21
    }
}
Add google-services.json

Download from Firebase Console

Place in android/app/

4.2 iOS Setup
Update Podfile

# ios/Podfile
platform :ios, '12.0'
Add GoogleService-Info.plist

Download from Firebase Console

Add to iOS project using Xcode

Update Info.plist if needed

4.3 Web Setup
Add Firebase SDK to index.html

<!-- web/index.html -->
<head>
  <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app.js"></script>
  <!-- Add other Firebase products you want to use -->
</head>
5. Testing Firebase Integration
5.1 Basic Connection Test
import 'package:firebase_core/firebase_core.dart';
 
Future<void> testFirebaseConnection() async {
  try {
    await Firebase.initializeApp();
    print('Firebase initialized successfully');
  } catch (e) {
    print('Firebase initialization failed: $e');
  }
}
5.2 Firestore Test
import 'package:cloud_firestore/cloud_firestore.dart';
 
Future<void> testFirestore() async {
  try {
    await FirebaseFirestore.instance
        .collection('test')
        .add({'timestamp': FieldValue.serverTimestamp()});
    print('Firestore write successful');
  } catch (e) {
    print('Firestore test failed: $e');
  }
}
6. Common Issues and Solutions
6.1 Android Issues
Gradle Sync Failed

# Solution: Update gradle wrapper
cd android
./gradlew wrapper --gradle-version=7.5
Minimum SDK Version

// android/app/build.gradle
android {
    defaultConfig {
        minSdkVersion 21  // Required for Firebase
    }
}
6.2 iOS Issues
Pods Not Found

# Solution: Update pods
cd ios
pod cache clean --all
pod update
Architecture Issues

# ios/Podfile
post_install do |installer|
  installer.pods_project.targets.each do |target|
    target.build_configurations.each do |config|
      config.build_settings['IPHONEOS_DEPLOYMENT_TARGET'] = '12.0'
    end
  end
end
7. Adding Firebase Services
7.1 Authentication
import 'package:firebase_auth/firebase_auth.dart';
 
class AuthService {
  final FirebaseAuth _auth = FirebaseAuth.instance;
 
  // Sign in anonymously
  Future<UserCredential?> signInAnon() async {
    try {
      return await _auth.signInAnonymously();
    } catch (e) {
      print(e.toString());
      return null;
    }
  }
}
7.2 Firestore
import 'package:cloud_firestore/cloud_firestore.dart';
 
class DatabaseService {
  final CollectionReference users = 
      FirebaseFirestore.instance.collection('users');
 
  Future<void> addUser(String userId, String name) async {
    return await users.doc(userId).set({
      'name': name,
      'timestamp': FieldValue.serverTimestamp(),
    });
  }
}
7.3 Storage
import 'package:firebase_storage/firebase_storage.dart';
 
class StorageService {
  final FirebaseStorage _storage = FirebaseStorage.instance;
 
  Future<String> uploadFile(File file, String path) async {
    try {
      await _storage.ref(path).putFile(file);
      return await _storage.ref(path).getDownloadURL();
    } catch (e) {
      print(e.toString());
      return '';
    }
  }
}
8. Best Practices
8.1 Security Rules
// Firestore security rules
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
8.2 Error Handling
try {
  // Firebase operations
} on FirebaseException catch (e) {
  switch (e.code) {
    case 'permission-denied':
      print('User does not have permission');
      break;
    case 'not-found':
      print('Document not found');
      break;
    default:
      print('Unknown error: ${e.code}');
  }
}
8.3 Performance Optimization
Enable offline persistence

void initFirestore() {
  FirebaseFirestore.instance.settings = 
      Settings(cacheSizeBytes: Settings.CACHE_SIZE_UNLIMITED);
}
Batch operations

Future<void> batchWrite(List<Map<String, dynamic>> data) async {
  final batch = FirebaseFirestore.instance.batch();
  final collectionRef = FirebaseFirestore.instance.collection('items');
  
  for (var item in data) {
    batch.set(collectionRef.doc(), item);
  }
  
  await batch.commit();
}
8.4 Environment Configuration
// lib/config/firebase_config.dart
class FirebaseConfig {
  static String get collectionName {
    if (kDebugMode) {
      return 'users_dev';
    }
    return 'users_prod';
  }
}
Checklist for Production
Enable App Check

Configure proper security rules

Set up authentication methods

Configure Firebase Analytics

Set up Crash Reporting

Configure Performance Monitoring

Review billing settings

Set up backup strategy

Configure proper indices

Test all Firebase services